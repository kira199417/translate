# 面向对象编程

本文翻译自[http://python-textbok.readthedocs.io/en/1.0/Object_Oriented_Programming.html](http://python-textbok.readthedocs.io/en/1.0/Object_Oriented_Programming.html)

## 简介

正如你在本课程前面部分的代码中所看到的，当你使用Python编程时，并不要求必须使用类来组织你的代码。你完全可以使用函数，这称之为过程式编程。但是，尽管过程式的编程范式可以满足短小精悍的程序，然而当程序的规模和复杂度日益增长时，面向对象编程就显得更有意义。  

当代码中含有越来越多的数据和函数时，就越应该将代码整理成多个逻辑子组，确保互相关联的数据和函数耦合在一起，而不相关的则互不干扰。模块化的代码更容易让人理解和修改，并且更有助于复用--代码复用是非常重要的，因为它减少了开发时间。

设想一个最糟糕的情况，程序中一个文件包含着一百个函数和一百个独立的全局变量。这将是一个非常难维护的程序。所有的变量都有可能被某一个函数修改，即使该函数不应该这么做。而且为了为每个变量挑选一个唯一的名字，其中部分变量可能用途相似，但却作用在不同的函数，为此我们很可能会求助于糟糕的命名法则。这很容易混淆变量之间的关系，因为很难去判断哪个函数使用哪些变量。

在不用面向对象方法的情况下，我们将尽可能使代码模块化。我们可以将关联的变量组合成聚合的数据结构。在过去，部分语言，比如*C++*，引入一种叫`struct`的数据结构，最终搞得跟*class*模糊不清，但`struct`本身不具有方法，只有属性。这使得程序员可以在多个独立变量中构造复合变量，而这也是通向面向对象编程的第一步。在Python中，我们经常会使用`dict`临时组合相关的数据。

我们可以将函数和数据分开到不同的命名空间中，而不是都定义在相同的全局命名空间。通常的做法是，将代码从物理上分开到不同的文件中。在Python中，我们的做法是将代码分开到不同的模块中。

正如我们在前面的章节所看到的，面向对象主要的附加好处在于，它将数据以及作用在这些数据上的函数组合在一个单独的结构中。这使得我们可以很容易地找到相关的代码，因为它们在物理上被定义得彼此相近，同时我们也很容易写出仅能通过对象的方法才能获取到对象的数据的代码。我们将在下一章节中讨论这个编码准则：**封装**。

部分人认为**OOP**在学习上是一种更加直观的编程风格，因为人们可以很容易理清对象以及对象之间的关系。因此，**OOP**有时也会被认为是一种高级方法，因为它可以让程序员更快地熟悉编程。

## 基本的OOP准则

面向对象中最重要的准则就是封装：对象中的数据只能通过对象的公共接口访问，也就是对象的方法。

在前面章节中提到的`age`函数就是阐述这种理念的一个很好的例子。如果需要操作对象中的数据或者计算一个新的值，我们可以定义一个进行该操作的对象的方法。无论我们什么时候执行该操作，直接调用该方法就行。我们认为这是一种糟糕的实践：从对象中获取数据，然后编写独立的代码在对象之外进行操作。

**封装**之所以是一种好的理念是由于以下几个原因：

- 函数只会定义在一个地方而不是多个。
- 函数定义在一个逻辑位置，也就是数据所在的位置。
- 对象中的数据不会平白无故地被不相关的外部代码所修改。
- 当我们使用一个方法时，我们仅需要知道方法所返回的结果是什么，而无需知道方法内部是如何实现的。我们可以切换到另外一个内部数据完全不一样的对象，并且无需改变代码，因为它们都有相同的借口。